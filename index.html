<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Customizable Tab Launcher</title>
  <style>
    body {
      background: #0d0d0d;
      color: #f2f2f2;
      font-family: "Segoe UI", sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    input {
      padding: 12px;
      font-size: 16px;
      width: 100%;
      max-width: 600px;
      border-radius: 6px;
      border: none;
      outline: none;
      margin-bottom: 10px;
      background: #1a1a1a;
      color: white;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background: #00ff88;
      color: black;
      cursor: pointer;
      max-width: 600px;
      margin-bottom: 20px;
    }
    iframe {
      flex-grow: 1;
      border: none;
      width: 100%;
      max-width: 1000px;
      border-radius: 8px;
      background: black;
    }
  </style>
</head>
<body>

  <h1>Customizable Tab Launcher</h1>
  <input id="urlInput" placeholder="Enter URL, e.g. https://myproxy.com/(https://google.com)" />
  <button id="openBtn">Open URL</button>
  <iframe id="embedFrame" style="display:none;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe>

  <script>
    const input = document.getElementById('urlInput');
    const openBtn = document.getElementById('openBtn');
    const embedFrame = document.getElementById('embedFrame');

    function parseInput(url) {
      // Look for parentheses containing embedded URL
      const match = url.match(/\((https?:\/\/[^)]+)\)/);
      if (match) {
        const embeddedUrl = match[1];
        // Remove the embedded URL part (including parentheses) from outer URL
        const outerUrl = url.replace(/\(https?:\/\/[^)]+\)/, '').trim();
        return { outerUrl, embeddedUrl };
      }
      return { outerUrl: url.trim(), embeddedUrl: null };
    }

    openBtn.onclick = () => {
      const val = input.value.trim();
      if (!val) {
        alert('Please enter a URL');
        return;
      }

      const { outerUrl, embeddedUrl } = parseInput(val);

      if (embeddedUrl) {
        // Open embedded URL in new tab
        window.open(embeddedUrl, '_blank');

        // Show embedded URL in iframe on page
        embedFrame.style.display = 'block';
        embedFrame.src = embeddedUrl;
      } else {
        // No embedded URL, open outer URL
        if (!outerUrl.match(/^https?:\/\//)) {
          alert('URL must start with http:// or https://');
          return;
        }
        window.open(outerUrl, '_blank');
        embedFrame.style.display = 'none';
        embedFrame.src = '';
      }
    };
  </script>
</body>
</html>
